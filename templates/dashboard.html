<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <style>
        /* --- General Styles --- */
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            margin: 0; 
            background-color: #e0e0e0; /* Light Grey background */
        }

        /* --- Sidebar (Left Side) --- */
        .sidebar {
            width: 250px;
            background-color: #444; /* Dark Grey Sidebar */
            position: fixed;
            height: 100%;
            border-right: 3px solid #000;
            padding-top: 20px;
        }

        .sidebar-header {
            background-color: #00b050; /* Green box for Username */
            color: yellow;
            padding: 10px;
            text-align: center;
            margin: 10px 15px;
            border: 2px solid #000;
            font-weight: bold;
            font-size: 20px;
            text-transform: uppercase;
            box-shadow: 3px 3px 0px #000;
        }

        .sidebar button {
            width: 85%;
            margin: 15px auto;
            display: block;
            padding: 12px;
            background-color: #00b050; /* Green Buttons */
            color: yellow;
            font-weight: bold;
            font-size: 16px;
            border: 2px solid #000;
            cursor: pointer;
            text-align: center;
            box-shadow: 3px 3px 0px #000;
            transition: 0.2s;
        }

        .sidebar button:hover {
            background-color: #008037;
            transform: translate(2px, 2px);
            box-shadow: 1px 1px 0px #000;
        }

        .logout-btn {
            margin-top: 100px !important;
            background-color: #00b050 !important;
        }

        /* --- Main Content (Right Side) --- */
        .main {
            margin-left: 250px;
            padding: 20px 40px;
        }

        /* --- Top Header --- */
        .top-header {
            background-color: #00b050;
            color: yellow;
            text-align: center;
            padding: 15px;
            border: 3px solid #000;
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 30px;
            text-shadow: 2px 2px #000;
            box-shadow: 5px 5px 0px #888;
        }

        /* --- Upload Section --- */
        .upload-box {
            background-color: #999; /* Grey background like mockup */
            padding: 15px;
            border: 3px solid #000;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            box-shadow: 5px 5px 0px #888;
        }

        .upload-label {
            font-weight: bold;
            font-size: 18px;
            background: white;
            padding: 8px 15px;
            border: 2px solid #000;
            /* Yahan se flex-grow hata diya hai taaki button na chhupe */
        }
        
        /* Input Field ab jagah lega */
        .upload-box input[type="file"] {
            flex-grow: 1;
            font-size: 16px;
            padding: 5px;
            background: #fff;
            border: 1px solid #000;
        }

        .upload-btn {
            background-color: red;
            color: yellow;
            font-weight: bold;
            padding: 10px 30px;
            border: 2px solid #000;
            cursor: pointer;
            font-size: 18px;
            box-shadow: 3px 3px 0px #000;
            white-space: nowrap; /* Button ka text tutega nahi */
        }
        
        .upload-btn:hover {
            background-color: darkred;
        }

        /* --- Result Section (Side by Side) --- */
        .result-container {
            display: flex;
            gap: 20px; /* Space between boxes */
            margin-bottom: 30px;
        }

        .info-box {
            flex: 1; /* Equal width */
            background-color: #00b050; /* Green Background */
            border: 3px solid #000;
            padding: 20px;
            color: #000; /* Black text */
            box-shadow: 5px 5px 0px #888;
        }

        .info-box h3 {
            color: #ff4500; /* Reddish Orange Title */
            margin-top: 0;
            text-align: center;
            font-size: 24px;
            text-shadow: 1px 1px #000;
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
        }

        .info-box p {
            font-weight: bold;
            margin: 12px 0;
            font-size: 16px;
            border-bottom: 1px dashed #000;
            padding-bottom: 5px;
        }

        /* --- Export Section --- */
        .export-box {
            background-color: #00b050;
            border: 3px solid #000;
            padding: 20px;
            text-align: center;
            box-shadow: 5px 5px 0px #888;
        }

        .export-box h3 {
            color: yellow;
            margin-top: 0;
            font-size: 26px;
            text-shadow: 2px 2px #000;
            margin-bottom: 20px;
        }

        .export-btn {
            background-color: #00e676; /* Lighter Green buttons */
            border: 2px solid #000;
            padding: 12px 30px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            margin: 0 15px;
            box-shadow: 3px 3px 0px #000;
        }

        .export-btn:hover {
            background-color: yellow;
            color: black;
        }

    </style>
</head>
<body>

<div class="sidebar">
    <div class="sidebar-header">
        {{ username }}
    </div>
    
    <button onclick="window.location='/dashboard'">Dashboard</button>
    <button>KYC Upload</button>
    <button>Reports</button>
    
    <button class="logout-btn" onclick="window.location='/logout'">Log Out</button>
</div>

<div class="main">
    
    <div class="top-header">
        ADMIN DASHBOARD
    </div>

    <form action="/dashboard" method="POST" enctype="multipart/form-data">
        <div class="upload-box">
            <span class="upload-label">Choose File Here:</span>
            <input type="file" name="aadhaar" required>
            <button type="submit" class="upload-btn">Upload</button>
        </div>
    </form>

    {% if latest_record %}
    <div class="result-container">
        
        <div class="info-box">
            <h3>User Details</h3>
            <p>Document: Aadhaar Card</p>
            <p>Name: {{ latest_record.name }}</p>
            <p>DOB: {{ latest_record.dob if latest_record.dob else "Not Found" }}</p>
            <p>Aadhaar No: {{ latest_record.masked_aadhaar }}</p>
            <p>Issue Date: {{ latest_record.issue_date if latest_record.issue_date else "Not Found" }}</p>
            <p>Address: {{ latest_record.address }}</p>
        </div>

        <div class="info-box">
            <h3>KYC Status: 
                {% if latest_record.status == 'Verified' %}
                    <span style="color: yellow;">Verified</span>
                {% else %}
                    <span style="color: red;">Fraud</span>
                {% endif %}
            </h3>
            
            <p>Fraud Score: 
                <span style="color: yellow;">{{ latest_record.fraud_score }}/100</span>
            </p>
            
            <p>Risk Level: 
                {% if latest_record.risk_level == 'Low' %}
                    <span style="color: darkgreen; background:yellow; padding:2px;">Low</span>
                {% else %}
                    <span style="color: red; background:yellow; padding:2px;">{{ latest_record.risk_level }}</span>
                {% endif %}
            </p>
            
            <p>Duplicate: {{ latest_record.duplicate }}</p>
        </div>

    </div>
    {% endif %}

    <div class="export-box">
        <h3>Export Data</h3>
        <button class="export-btn" onclick="window.location='/export/csv'">CSV file</button>
        <button class="export-btn" onclick="window.location='/export/pdf'">PDF file</button>
    </div>

</div>

</body>
</html>